(()=>{"use strict";window.wp.i18n;const e=window.wp.data;document.addEventListener("DOMContentLoaded",(function(){acf.add_action("ready",(function(){new Promise((t=>{const o=(0,e.subscribe)((()=>{(0,e.select)("core/block-editor").getBlockCount()>0&&(o(),t())}))})).then((()=>{!function(){let t=null;(0,e.subscribe)((()=>{const o=(0,e.select)("core/block-editor").getSelectedBlock();o&&"acf/dgwltd-hero"===o.name&&o!==t&&(console.log("Sidebar block selected:",o),(()=>{const t=(0,e.select)("core/block-editor").getSelectedBlock();if(!t||"acf/dgwltd-hero"!==t.name)return void console.warn("Selected block is not the hero block.");const{clientId:o,attributes:n}=t;if(!n||!n.data)return void console.warn("No ACF data found in the selected block.");const{background_image:c,focal_point_x:a,focal_point_y:d}=n.data;c?setTimeout((()=>{const t=document.querySelector('.acf-field-image[data-name="background_image"] .image-wrap'),c=t?t.querySelector("img"):null;if(!c||!t)return void console.warn("Could not find the background image in the ACF sidebar field.");console.log("Background Image Found in Sidebar:",c);let i=t.querySelector(".focus-dot");i||(i=document.createElement("div"),i.classList.add("focus-dot"),t.appendChild(i)),i.style.left=`${a}%`,i.style.top=`${d}%`,"true"!==c.dataset.eventAttached?(c.addEventListener("click",(t=>{const c=t.target.getBoundingClientRect(),a=t.clientX-c.left,d=t.clientY-c.top,l=a/c.width*100,r=d/c.height*100,s=document.querySelector('.acf-field-number[data-name="focal_point_x"] input'),u=document.querySelector('.acf-field-number[data-name="focal_point_y"] input');i.style.left=`${l}%`,i.style.top=`${r}%`,s&&u?(s.value=l.toFixed(2),u.value=r.toFixed(2),s.dispatchEvent(new Event("input",{bubbles:!0})),u.dispatchEvent(new Event("input",{bubbles:!0})),console.log(`Updated Focal Point X: ${l.toFixed(2)}%`),console.log(`Updated Focal Point Y: ${r.toFixed(2)}%`)):console.warn("Could not find ACF focal point input fields."),(0,e.dispatch)("core/block-editor").updateBlockAttributes(o,{data:{...n.data,focal_point_x:l.toFixed(2),focal_point_y:r.toFixed(2)}}),console.log("Updated ACF Focal Points in Block:",{focal_point_x:l.toFixed(2),focal_point_y:r.toFixed(2)})})),c.dataset.eventAttached="true",console.log("Click event attached to background image in sidebar.")):console.log("Event listener already attached, skipping...")}),500):console.warn("No background image found for this block.")})()),t=o}))}()}))}))}))})();